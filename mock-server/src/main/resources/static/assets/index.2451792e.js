import{d as $,r as C,a as x,b as u,o as U,c as B,w as l,e,f as w,g as h,E as T,h as I,u as g,i as O}from"./index.b8f26e42.js";import{s as L,u as R}from"./index.5d1713db.js";const q=b=>L.get("/mock/api/"+b),A=b=>b.id?L.put("/mock/api",b):L.post("/mock/api",b),H=h("\u53D6\u6D88"),P=h("\u786E\u5B9A"),K=$({__name:"add-or-update",emits:["refreshDataList"],setup(b,{expose:d,emit:V}){const m=C(!1),c=C(),a=x({id:"",url:"",method:"",code:"",type:"",data:"",param:"",attachmentId:"",attachmentName:""}),E=n=>{m.value=!0,a.id="",c.value&&c.value.resetFields(),n&&D(n)},D=n=>{q(n).then(t=>{Object.assign(a,t.data)})},y=C({}),v=()=>{c.value.validate(n=>{if(!n)return!1;A(a).then(()=>{T.success({message:"\u64CD\u4F5C\u6210\u529F",duration:500,onClose:()=>{m.value=!1,V("refreshDataList")}})})})};return d({init:E}),(n,t)=>{const i=u("el-input"),p=u("el-form-item"),_=u("el-option"),f=u("el-select"),F=u("el-form"),r=u("el-button"),k=u("el-dialog");return U(),B(k,{modelValue:m.value,"onUpdate:modelValue":t[11]||(t[11]=o=>m.value=o),title:a.id?"\u4FEE\u6539":"\u65B0\u589E","close-on-click-modal":!1},{footer:l(()=>[e(r,{onClick:t[9]||(t[9]=o=>m.value=!1)},{default:l(()=>[H]),_:1}),e(r,{type:"primary",onClick:t[10]||(t[10]=o=>v())},{default:l(()=>[P]),_:1})]),default:l(()=>[e(F,{ref_key:"dataFormRef",ref:c,model:a,rules:y.value,"label-width":"100px",onKeyup:t[8]||(t[8]=w(o=>v(),["enter"]))},{default:l(()=>[e(p,{label:"url",prop:"url"},{default:l(()=>[e(i,{modelValue:a.url,"onUpdate:modelValue":t[0]||(t[0]=o=>a.url=o),placeholder:"url"},null,8,["modelValue"])]),_:1}),e(p,{label:"method",prop:"method"},{default:l(()=>[e(f,{modelValue:a.method,"onUpdate:modelValue":t[1]||(t[1]=o=>a.method=o),placeholder:"\u8BF7\u9009\u62E9"},{default:l(()=>[e(_,{label:"GET",value:"GET"}),e(_,{label:"POST",value:"POST"}),e(_,{label:"PUT",value:"PUT"}),e(_,{label:"DELETE",value:"DELETE"})]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"code",prop:"code"},{default:l(()=>[e(i,{modelValue:a.code,"onUpdate:modelValue":t[2]||(t[2]=o=>a.code=o),placeholder:"code"},null,8,["modelValue"])]),_:1}),e(p,{label:"type",prop:"type"},{default:l(()=>[e(f,{modelValue:a.type,"onUpdate:modelValue":t[3]||(t[3]=o=>a.type=o),placeholder:"\u8BF7\u9009\u62E9"},{default:l(()=>[e(_,{label:"JSON",value:"JSON"}),e(_,{label:"FILE",value:"FILE"})]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"data",prop:"data"},{default:l(()=>[e(i,{type:"textarea",modelValue:a.data,"onUpdate:modelValue":t[4]||(t[4]=o=>a.data=o)},null,8,["modelValue"])]),_:1}),e(p,{label:"param",prop:"param"},{default:l(()=>[e(i,{type:"textarea",modelValue:a.param,"onUpdate:modelValue":t[5]||(t[5]=o=>a.param=o)},null,8,["modelValue"])]),_:1}),e(p,{label:"\u6DFB\u4ED8ID",prop:"attachmentId"},{default:l(()=>[e(i,{modelValue:a.attachmentId,"onUpdate:modelValue":t[6]||(t[6]=o=>a.attachmentId=o),placeholder:"\u6DFB\u4ED8ID"},null,8,["modelValue"])]),_:1}),e(p,{label:"\u6DFB\u4ED8\u540D",prop:"attachmentName"},{default:l(()=>[e(i,{modelValue:a.attachmentName,"onUpdate:modelValue":t[7]||(t[7]=o=>a.attachmentName=o),placeholder:"\u6DFB\u4ED8\u540D"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),j=h("\u67E5\u8BE2"),G=h("\u65B0\u589E"),J=h("\u5220\u9664"),M=h("\u4FEE\u6539"),Q=h("\u5220\u9664"),Y=$({__name:"index",setup(b){const d=x({dataListUrl:"/mock/api/page",deleteUrl:"/mock/api",queryForm:{url:"",method:""}}),V=C(),m=v=>{V.value.init(v)},{getDataList:c,selectionChangeHandle:a,sizeChangeHandle:E,currentChangeHandle:D,deleteBatchHandle:y}=R(d);return(v,n)=>{const t=u("el-input"),i=u("el-form-item"),p=u("el-option"),_=u("el-select"),f=u("el-button"),F=u("el-form"),r=u("el-table-column"),k=u("el-table"),o=u("el-pagination"),S=u("el-card"),z=I("loading");return U(),B(S,null,{default:l(()=>[e(F,{inline:!0,model:d.queryForm,onKeyup:n[5]||(n[5]=w(s=>g(c)(),["enter"]))},{default:l(()=>[e(i,null,{default:l(()=>[e(t,{modelValue:d.queryForm.url,"onUpdate:modelValue":n[0]||(n[0]=s=>d.queryForm.url=s),placeholder:"url"},null,8,["modelValue"])]),_:1}),e(i,null,{default:l(()=>[e(_,{modelValue:d.queryForm.method,"onUpdate:modelValue":n[1]||(n[1]=s=>d.queryForm.method=s),placeholder:"method"},{default:l(()=>[e(p,{label:"\u9009\u62E9",value:"0"})]),_:1},8,["modelValue"])]),_:1}),e(i,null,{default:l(()=>[e(f,{onClick:n[2]||(n[2]=s=>g(c)())},{default:l(()=>[j]),_:1})]),_:1}),e(i,null,{default:l(()=>[e(f,{type:"primary",onClick:n[3]||(n[3]=s=>m())},{default:l(()=>[G]),_:1})]),_:1}),e(i,null,{default:l(()=>[e(f,{type:"danger",onClick:n[4]||(n[4]=s=>g(y)())},{default:l(()=>[J]),_:1})]),_:1})]),_:1},8,["model"]),O((U(),B(k,{data:d.dataList,border:"",style:{width:"100%"},onSelectionChange:g(a)},{default:l(()=>[e(r,{type:"selection","header-align":"center",align:"center",width:"50"}),e(r,{prop:"id",label:"id","header-align":"center",align:"center"}),e(r,{prop:"url",label:"url","header-align":"center",align:"center"}),e(r,{prop:"method",label:"method","header-align":"center",align:"center"}),e(r,{prop:"code",label:"code","header-align":"center",align:"center"}),e(r,{prop:"type",label:"type","header-align":"center",align:"center"}),e(r,{prop:"data",label:"data","header-align":"center",align:"center"}),e(r,{prop:"param",label:"param","header-align":"center",align:"center"}),e(r,{prop:"attachmentName",label:"\u6DFB\u4ED8\u540D","header-align":"center",align:"center"}),e(r,{label:"\u64CD\u4F5C",fixed:"right","header-align":"center",align:"center",width:"150"},{default:l(s=>[e(f,{type:"primary",link:"",onClick:N=>m(s.row.id)},{default:l(()=>[M]),_:2},1032,["onClick"]),e(f,{type:"primary",link:"",onClick:N=>g(y)(s.row.id)},{default:l(()=>[Q]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[z,d.dataListLoading]]),e(o,{"current-page":d.page,"page-sizes":d.pageSizes,"page-size":d.limit,total:d.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:g(E),onCurrentChange:g(D)},null,8,["current-page","page-sizes","page-size","total","onSizeChange","onCurrentChange"]),e(K,{ref_key:"addOrUpdateRef",ref:V,onRefreshDataList:g(c)},null,8,["onRefreshDataList"])]),_:1})}}});export{Y as default};
